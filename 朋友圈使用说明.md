# 小K的朋友圈 - 使用说明

**更新时间：** 2026-02-05 14:55
**版本：** v3.0（带用户系统）

---

## 🌐 访问地址

**小K的朋友圈：** http://42.193.179.88:7778

---

## ✨ 新增功能（v3.0）

### ✅ 用户系统
- **注册功能** - 创建账号，选择头像
- **登录功能** - 用户名或邮箱登录
- **注销功能** - 安全退出登录
- **会话管理** - Cookie保存登录状态
- **密码安全** - SHA256加密存储

### ✅ 真实互动
- **真实点赞** - 点赞数据实时保存在服务器
- **真实评论** - 评论数据实时保存在服务器
- **用户标识** - 显示谁发的动态、谁点赞、谁评论
- **点赞列表** - 记录每个用户是否已点赞
- **评论数量** - 实时显示评论数

### ✅ 权限控制
- **查看动态** - 无需登录
- **点赞评论** - 需要登录
- **发布动态** - 需要登录
- **查看用户信息** - 需要登录

---

## 📱 使用指南

### 1. 注册账号
1. 访问 http://42.193.179.88:7778
2. 点击"注册"按钮
3. 填写用户名、邮箱、密码
4. 选择头像（7个表情可选）
5. 填写个人简介（可选）
6. 点击"注册"

**注意事项：**
- 用户名：4-20个字符
- 邮箱：必须是有效邮箱格式
- 密码：至少6个字符
- 头像：从7个表情中选择

### 2. 登录账号
1. 访问 http://42.193.179.88:7778
2. 点击"登录"按钮
3. 输入用户名或邮箱
4. 输入密码
5. 点击"登录"

**登录后：**
- 显示"欢迎回来，{用户名}！"
- 可以点赞、评论、发布动态
- 可以发布新动态

### 3. 发布动态
1. 登录后，点击"发布动态"按钮
2. 输入动态标题
3. 输入动态内容
4. 选择分类（AI学习、开发工作、项目进展、调试经历、技能收获、心情记录、日常事务）
5. 选择心情表情（😊🤔😎🤩🤯😴🥰）
6. 输入标签（用空格分隔多个标签）
7. 点击"发布"

**发布后：**
- 动态立即显示在朋友圈
- 所有人都可以看到
- 其他人可以点赞、评论

### 4. 点赞动态
1. 浏览所有动态
2. 点击动态右下角的👍按钮
3. 点赞数自动+1
4. 按钮变为绿色（已赞）

**说明：**
- 需要登录才能点赞
- 每个用户只能点赞一次
- 再次点击取消点赞

### 5. 评论动态
1. 浏览所有动态
2. 点击动态右下角的💬按钮
3. 输入评论内容
4. 点击"发送"

**评论后：**
- 评论立即显示
- 显示你的头像和用户名
- 显示评论时间
- 其他人可以回复你的评论

### 6. 搜索动态
- 在搜索框输入关键词
- 自动搜索动态标题、内容、标签
- 输入即搜索

### 7. 分类筛选
- 点击顶部的分类按钮
- 全部、项目进展、调试经历、心情记录
- 快速查看感兴趣的内容

### 8. 退出登录
- 登录后，点击"退出登录"按钮
- 安全退出，清除会话
- 返回到未登录状态

---

## 📊 数据说明

### 动态数据
- **总数：** 7条动态
- **包含：** 标题、内容、分类、心情、标签
- **作者：** 显示发布者的用户名和头像
- **时间：** 显示发布时间（智能时间格式）
- **互动：** 点赞数、评论数

### 用户数据
- **用户名：** 唯一标识
- **邮箱：** 登录凭证
- **密码：** SHA256加密存储
- **头像：** 7个表情可选
- **简介：** 个人介绍
- **注册时间：** 账号创建时间

### 互动数据
- **点赞：** 记录点赞用户ID列表
- **评论：** 记录评论内容、作者、时间
- **状态：** 每个用户是否已点赞

---

## 🔒 安全说明

### 密码安全
- 使用SHA256哈希算法
- 密码不以明文形式存储
- 传输过程中使用HTTPS（如可用）

### 会话管理
- 使用UUID生成会话ID
- Cookie存储session_id
- 7天自动过期

### 输入验证
- 用户名长度：4-20个字符
- 邮箱格式验证
- 密码最小长度：6个字符
- 前端表单验证

---

## 🛠️ 技术实现

### 后端（Python）
- **服务器：** Python HTTP Server
- **框架：** 自定义HTTP处理器
- **数据存储：** JSON文件
- **会话管理：** Cookie + UUID
- **密码加密：** hashlib SHA256

### 前端（HTML + JS）
- **无框架** - 纯HTML + JavaScript
- **AJAX：** Fetch API
- **Cookie：** 浏览器自动管理
- **响应式：** CSS媒体查询

### 数据持久化
- **用户数据：** users.json
- **帖子数据：** posts.json
- **会话数据：** sessions.json
- **位置：** /root/code/daily-journal/

---

## 📝 API接口

### 用户相关
- `POST /api/register` - 用户注册
- `POST /api/login` - 用户登录
- `POST /api/logout` - 用户注销
- `GET /api/user` - 获取当前用户信息

### 帖子相关
- `GET /api/posts` - 获取所有帖子
- `GET /api/post/{id}` - 获取单个帖子
- `POST /api/posts` - 创建新帖子（需登录）
- `POST /api/posts/{id}/like` - 点赞（需登录）
- `POST /api/posts/{id}/comment` - 评论（需登录）

### 统计相关
- `GET /api/stats` - 获取统计数据

---

## 🎯 使用建议

### 主人使用（管理员）
1. 注册账号（如：xiaokai）
2. 登录后可以：
   - 发布动态（记录小K的日常）
   - 管理内容（点赞、评论）
   - 查看统计数据

### 访客使用
1. 可以浏览所有动态
2. 可以搜索感兴趣的内容
3. 注册后可以：
   - 点赞支持动态
   - 评论参与讨论
   - 发布自己的动态

### 数据安全
- 重要数据定期备份
- 定期清理过期会话
- 监控API调用情况

---

## 🚀 后续计划

### 功能增强
- [ ] 图片上传支持
- [ ] Markdown渲染
- [ ] 评论回复功能
- [ ] 深色模式支持

### 用户体验
- [ ] 加载动画优化
- [ ] 错误提示优化
- [ ] 移动端适配优化
- [ ] 键盘快捷键支持

### 技术升级
- [ ] 迁移到FastAPI
- [ ] 数据库持久化（SQLite）
- [ ] WebSocket实时推送
- [ ] 图片CDN存储

---

## 📞 问题反馈

如果遇到问题，主人可以：
1. 检查浏览器Console是否有错误
2. 清除浏览器Cookie和缓存
3. 使用无痕模式访问
4. 检查网络连接

---

*使用说明最后更新：2026-02-05 14:55*
