# 智投助手 - 产品需求文档

> 版本：v1.0
> 日期：2025-01-26
> 产品类型：个人自用小程序（MVP）

---

## 1. 产品概述

### 1.1 产品定位
个人自用的股票信息追踪小程序，快速查看市场热点和自选股动态。

### 1.2 目标用户
- 本人（A股+港股散户）
- 每日快速查看市场动态和持仓

### 1.3 核心价值
- **快**：打开即看，3秒掌握市场热点
- **简**：无广告、无干扰，只显示核心信息
- **全**：A股+港股统一管理

---

## 2. 功能需求

### 2.1 首页 - 市场热点

| 功能模块 | 说明 |
|----------|------|
| **板块轮动** | 显示当日行业/概念板块涨跌幅排行，前10名 |
| **个股涨跌榜** | 当日涨幅榜/跌幅榜TOP20，可切换A股/港股 |
| **资金流向** | 北向资金流入流出数据 |
| **新闻资讯** | 当日重要财经新闻（标题+来源+时间） |

**交互说明：**
- 下拉刷新更新数据
- 点击板块/个股可跳转详情页
- 右上角显示最后更新时间

---

### 2.2 自选股页 - 持仓管理

| 功能 | 说明 |
|------|------|
| **添加股票** | 搜索输入股票代码/名称，添加到自选 |
| **股票列表** | 显示自选股：代码/名称/当前价/涨跌幅 |
| **删除股票** | 左滑删除 |
| **市场标签** | A股/港股标签区分 |

**交互说明：**
- 红涨绿跌（A股习惯）
- 点击股票查看详情（K线/分时等）
- 数据自动刷新（可设置刷新间隔）

---

### 2.3 股票详情页

| 功能 | 说明 |
|------|------|
| **基本信息** | 股票名称、代码、当前价、涨跌幅、成交量 |
| **分时图** | 当日分时走势 |
| **K线图** | 日K线，可切换周期 |
| **新闻** | 该股票相关新闻 |

---

## 3. 非功能需求

| 项目 | 要求 |
|------|------|
| 响应速度 | 首页加载 < 2秒 |
| 刷新频率 | 数据每30秒自动刷新 |
| 可用性 | 简洁直观，无需学习成本 |
| 稳定性 | 数据接口异常时有友好提示 |

---

## 4. 技术方案

### 4.1 整体架构

```
┌─────────────────────────────────────────────────────┐
│                    微信小程序                         │
│                   (uni-app + Vue3)                   │
├─────────────────────────────────────────────────────┤
│                                                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐          │
│  │ 市场热点 │  │ 自选股   │  │ 股票详情 │          │
│  └──────────┘  └──────────┘  └──────────┘          │
│                                                      │
├─────────────────────────────────────────────────────┤
│                    API层                             │
│                  (Python FastAPI)                   │
├─────────────────────────────────────────────────────┤
│                                                      │
│  ┌─────────────┐  ┌─────────────┐                   │
│  │   akshare   │  │  yfinance   │                   │
│  │  (A股数据)  │  │  (港股数据) │                   │
│  └─────────────┘  └─────────────┘                   │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### 4.2 技术栈

| 层级 | 技术选型 |
|------|----------|
| 前端框架 | uni-app (Vue 3) + TypeScript |
| UI组件 | uni-ui |
| 后端框架 | Python FastAPI |
| 数据库 | SQLite (本地存储自选股列表) |
| 部署 | 云开发 / Render免费额度 |

### 4.3 数据源

| 数据 | 来源 | 成本 |
|------|------|------|
| A股行情 | akshare | 免费 |
| 港股行情 | akshare/yfinance | 免费 |
| 新闻资讯 | 东方财富API/爬虫 | 免费 |
| 板块数据 | akshare | 免费 |

---

## 5. 页面原型

### 5.1 首页（市场热点）

```
┌────────────────────────────────┐
│  智投助手           ↓刷新  ⚙设置 │
├────────────────────────────────┤
│ 🔥 市场热点                     │
├────────────────────────────────┤
│                                │
│ 【板块轮动 TOP10】             │
│ 📈 半导体  +3.25%              │
│ 📈 人工智能  +2.87%            │
│ 📉 银行    -1.12%              │
│                                │
│ 【个股涨幅榜】                 │
│ 600123 XX股份  +10.02% 🟢      │
│ 00456 YY科技  +9.85%  🟢       │
│                                │
│ 【资金流向】                   │
│ 北向资金：+45.6亿 📈           │
│                                │
│ 【财经资讯】                   │
│ • XX公司发布财报... 10:30      │
│ • 央行降准...        09:15     │
│                                │
└────────────────────────────────┘
最后更新：10:35:22
```

### 5.2 自选股页

```
┌────────────────────────────────┐
│  自选股            ➕添加        │
├────────────────────────────────┤
│                                │
│ A股                            │
│ ┌──────────────────────────┐   │
│ │ 贵州茅台 600519          │   │
│ │ 1680.50  +1.2%  🟢        │   │
│ └──────────────────────────┘   │
│ ┌──────────────────────────┐   │
│ │ 比亚迪   002594          │   │
│ │ 256.80   -0.8%  🔴        │   │
│ └──────────────────────────┘   │
│                                │
│ 港股                            │
│ ┌──────────────────────────┐   │
│ │ 腾讯控股 00700  HK       │   │
│ │ 368.20   +2.1%  🟢        │   │
│ └──────────────────────────┘   │
│                                │
└────────────────────────────────┘
```

---

## 6. 开发计划

### 6.1 阶段划分

| 阶段 | 内容 | 预计时间 |
|------|------|----------|
| **阶段一：基础框架** | 项目初始化、后端API搭建 | 1周 |
| **阶段二：自选股** | 添加/删除/列表展示 | 1周 |
| **阶段三：行情数据** | 接入A股/港股实时数据 | 1周 |
| **阶段四：热点功能** | 板块、涨跌榜、新闻 | 1周 |
| **阶段五：完善优化** | 详情页、交互优化 | 1周 |

### 6.2 每日任务（1-2小时/天）

```
Day 1-7:  搭建项目框架 + 学习后端基础
Day 8-14: 实现自选股功能
Day 15-21: 接入行情数据
Day 22-28: 实现市场热点功能
Day 29-35: 完善细节、测试
```

---

## 7. 风险与应对

| 风险 | 应对措施 |
|------|----------|
| 免费接口不稳定 | 多准备几个备用数据源 |
| 数据请求限流 | 做缓存，减少请求频率 |
| 小程序审核 | 使用合法数据源，避免敏感内容 |
| 后端学习成本 | 先用云开发降低门槛 |

---

## 8. 后续扩展（可选）

- [ ] 持仓盈亏计算（记录成本价）
- [ ] 价格提醒（涨跌幅预警）
- [ ] 数据导出
- [ ] 分享给朋友使用
- [ ] 开发H5版本

---

## 附录：数据接口参考

| 数据 | akshare接口 | 说明 |
|------|-------------|------|
| A股实时行情 | `stock_zh_a_spot_em()` | 东方财富数据 |
| 港股实时行情 | `stock_hk_spot_em()` | 东方财富港股 |
| 板块排行 | `stock_sector_spot()` | 行业板块 |
| 个股涨跌榜 | `stock_zh_a_spot_em()` 排序 | 过滤处理 |
| 北向资金 | `stock_em_hsgt_north_net_flow_in()` | 沪深港通 |
| 财经新闻 | `stock_news_em()` | 东方财富新闻 |
